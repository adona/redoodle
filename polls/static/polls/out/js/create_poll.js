!function(e){function t(t){for(var r,i,s=t[0],l=t[1],u=t[2],d=0,f=[];d<s.length;d++)i=s[d],a[i]&&f.push(a[i][0]),a[i]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(c&&c(t);f.length;)f.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,s=1;s<n.length;s++){var l=n[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={6:0,3:0,4:0,5:0,9:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;o.push([169,0]),n()}({10:function(e,t,n){"use strict";n.r(t),n.d(t,"PAGES",function(){return y}),n.d(t,"MainHeader",function(){return j}),n.d(t,"UserMenu",function(){return g}),n.d(t,"CreatePollButton",function(){return E});var r=n(2),a=n.n(r),o=n(0),i=n.n(o);n(13);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=a()("body").attr("user");"Anonymous"!=h&&(h=JSON.parse(h));var y={dashboard:{description:"Dashboard"},logout:{description:"Log out"},create_poll:{description:"Create"}};for(var b in y)y[b].url=a()("body").attr("url_".concat(b));var j=function(e){function t(){return l(this,t),d(this,p(t).apply(this,arguments))}return m(t,i.a.Component),c(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"main-header"},i.a.createElement("div",{id:"header-nav"},i.a.createElement("div",{id:"header-nav-left"},i.a.createElement("a",{id:"logo",href:y.dashboard.url},"ReDoodle")),i.a.createElement("div",{id:"header-nav-right"},i.a.createElement(g,{entries:this.props.entries}),this.props.showCreatePollButton?i.a.createElement(E,null):"")))}}]),t}(),g=function(e){function t(e){var n,r,o,i;return l(this,t),n=d(this,p(t).call(this,e)),r=f(n),i=function(){return a()("#user-menu-entries").toggleClass("expanded")},(o="toggleExpand")in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,window.onclick=function(e){e.target.matches("#user-menu-button")||a()("#user-menu-entries").removeClass("expanded")},n}return m(t,i.a.Component),c(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"user-menu"},i.a.createElement("button",{id:"user-menu-button",onClick:this.toggleExpand},"".concat(h.first_name," ").concat(h.last_name),i.a.createElement("span",{id:"down-arrow"},"⌄")),i.a.createElement("ul",{id:"user-menu-entries"},this.props.entries.map(function(e,t){return i.a.createElement("li",{key:t,className:"user-menu-entry"},i.a.createElement("a",{href:y[e].url},y[e].description))})))}}]),t}(),E=function(e){function t(){return l(this,t),d(this,p(t).apply(this,arguments))}return m(t,i.a.Component),c(t,[{key:"render",value:function(){return i.a.createElement("a",{id:"create-poll-button",href:y.create_poll.url},"+ ",y.create_poll.description)}}]),t}()},13:function(e,t,n){},145:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return S});var r=n(2),a=n.n(r),o=n(0),i=n.n(o),s=n(146),l=n(147),u=n.n(l),c=n(148),d=n.n(c),f=n(12),p=n.n(f),m=n(1),v=n.n(m);n(150);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=this,o=(e=b(t)).call.apply(e,[this].concat(l)),n=!o||"object"!==h(o)&&"function"!=typeof o?j(r):o,E(j(n),"calendarRef",i.a.createRef()),E(j(n),"getCalendar",function(){return n.calendarRef.current.getApi()}),E(j(n),"handleEventRender",function(e){var t=e.el;a()(t).append("\n        <div class='event-overlay'>\n          <div class='remove-event-button' eventid='".concat(e.event.id,"'>\n            ✕\n          </div>\n        </div>\n      ")),a()(t).on("click",".remove-event-button",n.handleRemoveEvent)}),E(j(n),"handleSelect",function(e){n.props.onAddEvent(e.start,e.end)}),E(j(n),"handleDateClick",function(){var e,t=n.getCalendar(),r=n.props.calendarEvents,a=r.length,o=r[a-1];if(1==a)e=v.a.duration(1,"hours");else{var i=r[r.length-2];e=v.a.duration(v()(i.end).diff(v()(i.start)))}var s=o.start,l=Object(f.toMoment)(s,t).add(e).toDate();n.props.onUpdateEvent(o.id,s,l)}),E(j(n),"handleUpdateEvent",function(e){var t=e.event;n.props.onUpdateEvent(t.id,t.start,t.end)}),E(j(n),"handleRemoveEvent",function(e){var t=a()(e.target).attr("eventid");n.props.onRemoveEvent(t)}),E(j(n),"handlePrev",function(){n.getCalendar().prev(),n.updateDateRange()}),E(j(n),"handleNext",function(){n.getCalendar().next(),n.updateDateRange()}),E(j(n),"updateDateRange",function(){var e=n.getCalendar(),t=v()(e.getDate()),r=v()(t).startOf("week"),o=v()(t).endOf("week"),i=r.format("MMM D")+" - "+o.format("D, YYYY");a()(".date-range").text(i)}),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,i.a.Component),n=t,(r=[{key:"render",value:function(){return i.a.createElement("div",{className:"week-calendar"},i.a.createElement("div",{className:"week-calendar-header"},i.a.createElement("div",{className:"prev-button"},"<"),i.a.createElement("div",{className:"date-range"}),i.a.createElement("div",{className:"next-button"},">")),i.a.createElement(s.a,{ref:this.calendarRef,plugins:[u.a,d.a,p.a],defaultView:"timeGridWeek",header:!1,height:550,columnHeaderHtml:function(e){e=v()(e);return'\n              <div class="header-month">'.concat(e.format("MMM"),'</div>\n              <div class="header-day">').concat(e.format("D"),'</div>\n              <div class="header-weekday">').concat(e.format("ddd"),"</div>\n            ")},slotLabelFormat:{hour:"numeric",minute:"2-digit"},eventTimeFormat:{hour:"numeric",minute:"2-digit"},scrollTime:"08:00:00",events:this.props.calendarEvents,eventRender:this.handleEventRender,selectable:!0,snapDuration:"00:15:00",select:this.handleSelect,dateClick:this.handleDateClick,editable:!0,eventResize:this.handleUpdateEvent,eventDrop:this.handleUpdateEvent}))}},{key:"componentDidMount",value:function(){this.updateDateRange(),a()(".prev-button").on("click",this.handlePrev),a()(".next-button").on("click",this.handleNext)}}])&&y(n.prototype,r),o&&y(n,o),t}()},150:function(e,t,n){},156:function(e,t,n){var r={"./af":18,"./af.js":18,"./ar":19,"./ar-dz":20,"./ar-dz.js":20,"./ar-kw":21,"./ar-kw.js":21,"./ar-ly":22,"./ar-ly.js":22,"./ar-ma":23,"./ar-ma.js":23,"./ar-sa":24,"./ar-sa.js":24,"./ar-tn":25,"./ar-tn.js":25,"./ar.js":19,"./az":26,"./az.js":26,"./be":27,"./be.js":27,"./bg":28,"./bg.js":28,"./bm":29,"./bm.js":29,"./bn":30,"./bn.js":30,"./bo":31,"./bo.js":31,"./br":32,"./br.js":32,"./bs":33,"./bs.js":33,"./ca":34,"./ca.js":34,"./cs":35,"./cs.js":35,"./cv":36,"./cv.js":36,"./cy":37,"./cy.js":37,"./da":38,"./da.js":38,"./de":39,"./de-at":40,"./de-at.js":40,"./de-ch":41,"./de-ch.js":41,"./de.js":39,"./dv":42,"./dv.js":42,"./el":43,"./el.js":43,"./en-SG":44,"./en-SG.js":44,"./en-au":45,"./en-au.js":45,"./en-ca":46,"./en-ca.js":46,"./en-gb":47,"./en-gb.js":47,"./en-ie":48,"./en-ie.js":48,"./en-il":49,"./en-il.js":49,"./en-nz":50,"./en-nz.js":50,"./eo":51,"./eo.js":51,"./es":52,"./es-do":53,"./es-do.js":53,"./es-us":54,"./es-us.js":54,"./es.js":52,"./et":55,"./et.js":55,"./eu":56,"./eu.js":56,"./fa":57,"./fa.js":57,"./fi":58,"./fi.js":58,"./fo":59,"./fo.js":59,"./fr":60,"./fr-ca":61,"./fr-ca.js":61,"./fr-ch":62,"./fr-ch.js":62,"./fr.js":60,"./fy":63,"./fy.js":63,"./ga":64,"./ga.js":64,"./gd":65,"./gd.js":65,"./gl":66,"./gl.js":66,"./gom-latn":67,"./gom-latn.js":67,"./gu":68,"./gu.js":68,"./he":69,"./he.js":69,"./hi":70,"./hi.js":70,"./hr":71,"./hr.js":71,"./hu":72,"./hu.js":72,"./hy-am":73,"./hy-am.js":73,"./id":74,"./id.js":74,"./is":75,"./is.js":75,"./it":76,"./it-ch":77,"./it-ch.js":77,"./it.js":76,"./ja":78,"./ja.js":78,"./jv":79,"./jv.js":79,"./ka":80,"./ka.js":80,"./kk":81,"./kk.js":81,"./km":82,"./km.js":82,"./kn":83,"./kn.js":83,"./ko":84,"./ko.js":84,"./ku":85,"./ku.js":85,"./ky":86,"./ky.js":86,"./lb":87,"./lb.js":87,"./lo":88,"./lo.js":88,"./lt":89,"./lt.js":89,"./lv":90,"./lv.js":90,"./me":91,"./me.js":91,"./mi":92,"./mi.js":92,"./mk":93,"./mk.js":93,"./ml":94,"./ml.js":94,"./mn":95,"./mn.js":95,"./mr":96,"./mr.js":96,"./ms":97,"./ms-my":98,"./ms-my.js":98,"./ms.js":97,"./mt":99,"./mt.js":99,"./my":100,"./my.js":100,"./nb":101,"./nb.js":101,"./ne":102,"./ne.js":102,"./nl":103,"./nl-be":104,"./nl-be.js":104,"./nl.js":103,"./nn":105,"./nn.js":105,"./pa-in":106,"./pa-in.js":106,"./pl":107,"./pl.js":107,"./pt":108,"./pt-br":109,"./pt-br.js":109,"./pt.js":108,"./ro":110,"./ro.js":110,"./ru":111,"./ru.js":111,"./sd":112,"./sd.js":112,"./se":113,"./se.js":113,"./si":114,"./si.js":114,"./sk":115,"./sk.js":115,"./sl":116,"./sl.js":116,"./sq":117,"./sq.js":117,"./sr":118,"./sr-cyrl":119,"./sr-cyrl.js":119,"./sr.js":118,"./ss":120,"./ss.js":120,"./sv":121,"./sv.js":121,"./sw":122,"./sw.js":122,"./ta":123,"./ta.js":123,"./te":124,"./te.js":124,"./tet":125,"./tet.js":125,"./tg":126,"./tg.js":126,"./th":127,"./th.js":127,"./tl-ph":128,"./tl-ph.js":128,"./tlh":129,"./tlh.js":129,"./tr":130,"./tr.js":130,"./tzl":131,"./tzl.js":131,"./tzm":132,"./tzm-latn":133,"./tzm-latn.js":133,"./tzm.js":132,"./ug-cn":134,"./ug-cn.js":134,"./uk":135,"./uk.js":135,"./ur":136,"./ur.js":136,"./uz":137,"./uz-latn":138,"./uz-latn.js":138,"./uz.js":137,"./vi":139,"./vi.js":139,"./x-pseudo":140,"./x-pseudo.js":140,"./yo":141,"./yo.js":141,"./zh-cn":142,"./zh-cn.js":142,"./zh-hk":143,"./zh-hk.js":143,"./zh-tw":144,"./zh-tw.js":144};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=156},16:function(e,t,n){},169:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),o=n(0),i=n.n(o),s=n(11),l=n.n(s),u=n(10),c=n(158),d=n(7),f=n(3),p=n(145);n(9),n(172);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){O(e,t,n[t])})}return e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?S(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){function t(){var e,n;y(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return O(S(n=g(this,(e=E(t)).call.apply(e,[this].concat(o)))),"state",{poll:{name:"",location:"",notes:"",polltimes:[]}}),O(S(n),"saveIntermediaryState",function(e){var t=h({},n.state.poll);return Object.assign(t,e),n.setState({poll:t}),t}),O(S(n),"createNewPoll",function(e){e=h({},e);for(var t=0;t<e.polltimes.length;t++)e.polltimes[t]={start:e.polltimes[t].start,end:e.polltimes[t].end};e.timezone="America/New York",a.a.ajax({url:"",type:"POST",contentType:"application/json",data:JSON.stringify(e)}).done(function(e){window.onbeforeunload=null,window.location.href=e.redirect}).fail(function(e){console.log("Failed to create new poll."),console.log(e.responseText)})}),n}return w(t,i.a.Component),j(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"create-poll-container"},i.a.createElement(c.a,null,i.a.createElement(d.c,null,i.a.createElement(d.a,{path:"/create/",exact:!0,render:function(t){return i.a.createElement(_,v({},t,{poll:e.state.poll,saveIntermediaryState:e.saveIntermediaryState}))}}),i.a.createElement(d.a,{path:"/create/options/",render:function(t){return i.a.createElement(P,v({},t,{poll:e.state.poll,saveIntermediaryState:e.saveIntermediaryState,createNewPoll:e.createNewPoll}))}}))))}}]),t}(),_=function(e){function t(){var e,n;y(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return O(S(n=g(this,(e=E(t)).call.apply(e,[this].concat(a)))),"handleSubmit",function(e){n.props.saveIntermediaryState(e),n.props.history.push("/create/options/")}),n}return w(t,i.a.Component),j(t,[{key:"render",value:function(){return i.a.createElement("div",{id:"title-page"},i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"step-nr"},"Step 1 of 4"),i.a.createElement("div",{className:"prompt"},"What's the occasion?")),i.a.createElement(f.Form,{id:"title-form",key:"title-form",formValues:this.props.poll,submitLabel:"Continue",onSubmit:this.handleSubmit},i.a.createElement(f.Input,{name:"name",placeholder:"Enter title",required:!0,requiredMessage:"Please, enter title."}),i.a.createElement(f.Input,{name:"location",placeholder:"Add location"}),i.a.createElement(f.Input,{name:"notes",placeholder:"Add note"})))}}]),t}(),P=function(e){function t(){var e,n;y(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return O(S(n=g(this,(e=E(t)).call.apply(e,[this].concat(a)))),"state",{calendarEvents:n.props.poll.polltimes}),O(S(n),"nextID",Math.max(n.props.poll.polltimes)+1),O(S(n),"handleAddEvent",function(e,t){var r=n.state.calendarEvents.slice();r.push({id:n.nextID,title:n.props.poll.name,start:e,end:t}),n.setState({calendarEvents:r}),n.nextID+=1}),O(S(n),"handleUpdateEvent",function(e,t,r){var a=n.state.calendarEvents.slice(),o=a.findIndex(function(t){return t.id==e});a[o]=h({},a[o],{start:t,end:r}),n.setState({calendarEvents:a})}),O(S(n),"handleRemoveEvent",function(e){var t=n.state.calendarEvents.slice(),r=t.findIndex(function(t){return t.id==e});t.splice(r,1),n.setState({calendarEvents:t})}),O(S(n),"handleSubmit",function(e){var t=n.props.saveIntermediaryState({polltimes:n.state.calendarEvents});"continue"==e?n.props.createNewPoll(t):n.props.history.push("/create/")}),n}return w(t,i.a.Component),j(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{id:"options-page"},i.a.createElement("div",{className:"header"},i.a.createElement("div",{className:"step-nr"},"Step 2 of 4"),i.a.createElement("div",{className:"prompt"},"What are the options?")),i.a.createElement(p.default,{calendarEvents:this.state.calendarEvents,onAddEvent:this.handleAddEvent,onUpdateEvent:this.handleUpdateEvent,onRemoveEvent:this.handleRemoveEvent}),i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"container-previous"},i.a.createElement(f.Submit,{active:!0,label:"<",onClick:function(){return e.handleSubmit("return")}})),i.a.createElement("div",{className:"container-next"},i.a.createElement(f.Submit,{active:!0,label:"Continue",onClick:function(){return e.handleSubmit("continue")}}))))}}]),t}();l.a.render(i.a.createElement("div",null,i.a.createElement(u.MainHeader,{entries:["dashboard","logout"]}),",",i.a.createElement(C,null)),a()("#main")[0]),window.onbeforeunload=function(){return""}},172:function(e,t,n){},3:function(e,t,n){"use strict";n.r(t),n.d(t,"Form",function(){return h}),n.d(t,"Input",function(){return y}),n.d(t,"Submit",function(){return b}),n.d(t,"validators",function(){return j});var r=n(2),a=n.n(r),o=n(0),i=n.n(o);n(9),n(16);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?p(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n;return l(this,t),(n=d(this,f(t).call(this,e))).initializeState(),n.onValueChange=n.onValueChange.bind(p(n)),n.onBlur=n.onBlur.bind(p(n)),n.onSubmit=n.onSubmit.bind(p(n)),n.onServerSideErrors=n.onServerSideErrors.bind(p(n)),n}return m(t,i.a.Component),c(t,[{key:"initializeState",value:function(){var e=this,t=this.getChildren().filter(function(t){return e.isField(t)}),n={},r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){n[(p=i.value).props.name]={isRequired:null!=p.props.required,validators:this.getValidators(p),listeners:[],isFirstEdit:null==this.props.formValues,value:null!=this.props.formValues?this.props.formValues[p.props.name]:"",isValid:null!=this.props.formValues||null,error:null}}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}var l=!0,u=!1,c=void 0;try{for(var d,f=t[Symbol.iterator]();!(l=(d=f.next()).done);l=!0){var p;if(null!=(p=d.value).props.listenTo){var m=!0,v=!1,h=void 0;try{for(var y,b=p.props.listenTo[Symbol.iterator]();!(m=(y=b.next()).done);m=!0){n[y.value].listeners.push(p.props.name)}}catch(e){v=!0,h=e}finally{try{m||null==b.return||b.return()}finally{if(v)throw h}}}}}catch(e){u=!0,c=e}finally{try{l||null==f.return||f.return()}finally{if(u)throw c}}this.state={fields:n,nonFieldErrors:null},this.state.canSubmit=this.canSubmit()}},{key:"getChildren",value:function(){var e=this.props.children;return null==e?e=[]:Array.isArray(e)||(e=[e]),e}},{key:"isField",value:function(e){return e.type==y}},{key:"getValidators",value:function(e){var t=e.props.validators;if(null==t&&(t=[]),e.props.required){var n=j.getValidateRequired(e.props.requiredMessage);t.unshift(n)}return t}},{key:"onValueChange",value:function(e,t){var n=this.state,r=n.fields;r[e].value=t,n.fields=r,n.nonFieldErrors=null,this.setState(n),r[e].isFirstEdit||this.validate(e);var a=!0,o=!1,i=void 0;try{for(var s,l=r[e].listeners[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value;""!=r[u].value&&this.validate(u)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}}},{key:"onBlur",value:function(e){var t=this.state,n=t.fields;n[e].isFirstEdit&&(n[e].isFirstEdit=!1,t.fields=n,this.setState(t),this.validate(e))}},{key:"validate",value:function(e){var t=this.state,n=t.fields,r={isValid:!0,error:null},a=!0,o=!1,i=void 0;try{for(var s,l=n[e].validators[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){if(!(r=(0,s.value)(n[e].value,e,n)).isValid)break}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}n[e].isValid=r.isValid,n[e].error=r.error,t.fields=n,t.canSubmit=this.canSubmit(),this.setState(t)}},{key:"validateAll",value:function(){for(var e=0,t=Object.keys(this.state.fields);e<t.length;e++){var n=t[e];this.validate(n)}}},{key:"canSubmit",value:function(){var e=this.state;if(null!=e.nonFieldErrors)return!1;for(var t=e.fields,n=0,r=Object.values(t);n<r.length;n++){var a=r[n];if(a.isRequired&&""==a.value||null!=a.error)return!1}return!0}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validateAll(),this.state.canSubmit){for(var t={},n=0,r=Object.keys(this.state.fields);n<r.length;n++){var o=r[n];t[o]=this.state.fields[o].value}null!=this.props.onSubmit?this.props.onSubmit(t):a.a.post(this.props.submitURL,t).done(function(e){window.location.replace(e.redirect)}).fail(this.onServerSideErrors)}}},{key:"onServerSideErrors",value:function(e){if([400,401].includes(e.status)){for(var t=e.responseJSON,n=this.state,r=n.fields,a=0,o=Object.keys(t);a<o.length;a++){var i=o[a];"__all__"==i?n.nonFieldErrors=t[i]:(r[i].isValid=!1,r[i].error=t[i][0])}n.fields=r,n.canSubmit=!1,this.setState(n)}}},{key:"render",value:function(){var e=this,t=this.getChildren(),n=this.state.fields;return i.a.createElement("form",{className:"custom-form",id:this.props.id,noValidate:!0,onSubmit:this.onSubmit},t.map(function(t,r){return e.isField(t)?i.a.cloneElement(t,{key:r,value:n[t.props.name].value,isValid:n[t.props.name].isValid,error:n[t.props.name].error,onValueChange:e.onValueChange,onBlur:e.onBlur}):t}),null==this.state.nonFieldErrors?"":i.a.createElement("div",{className:"field-container"},this.state.nonFieldErrors.map(function(e,t){return i.a.createElement("div",{className:"error-list",key:t}," ",e," ")})),i.a.createElement(b,{active:this.state.canSubmit,label:this.props.submitLabel}))}}]),t}(),y=function(e){function t(e){var n;return l(this,t),(n=d(this,f(t).call(this,e))).onValueChange=n.onValueChange.bind(p(n)),n.onBlur=n.onBlur.bind(p(n)),n}return m(t,i.a.Component),c(t,[{key:"onValueChange",value:function(e){this.props.onValueChange(this.props.name,e.currentTarget.value)}},{key:"onBlur",value:function(e){this.props.onBlur(this.props.name)}},{key:"render",value:function(){return i.a.createElement("div",{className:"field-container",required:this.props.required,invalid:0==this.props.isValid?"":null,name:this.props.name},i.a.createElement("input",{className:"field-input",type:this.props.type,name:this.props.name,placeholder:this.props.placeholder,value:this.props.value,onChange:this.onValueChange,onBlur:this.onBlur}),i.a.createElement("div",{className:"error-list"}," ",this.props.error," "))}}]),t}(),b=function(e){function t(){return l(this,t),d(this,f(t).apply(this,arguments))}return m(t,i.a.Component),c(t,[{key:"render",value:function(){return i.a.createElement("input",{className:"submit-button",type:"submit",active:this.props.active.toString(),value:this.props.label,onClick:this.props.onClick})}}]),t}(),j={getValidateRequired:function(e){return null==e&&(e="Field is required."),function(t){var n=""!=t;return{isValid:n,error:n?null:e}}},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e);return{isValid:t,error:t?null:"Invalid email. Try again, please."}},validatePassword:function(e){var t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[,.\/<>?;':"[\]{}!@#$%^&*()-=_+])[A-Za-z\d,.\/<>?;':"[\]{}!@#$%^&*()-=_+]{8,}$/.test(e);return{isValid:t,error:t?null:"Invalid password. Password must be at least 8 characters long, and must contain at least one lowercase letter, one uppercase letter, one number, and one special character. Try again, please."}},validatePasswordMatch:function(e,t,n){var r="password1"==t?n.confirm2.value:n.password1.value,a=""==r|e==r;return{isValid:a,error:a?null:"Passwords do not match. Try again, please"}}}},9:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r);var o=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),r=0;r<n.length;r++){var a=n[r].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}("csrftoken");a.a.ajaxSetup({beforeSend:function(e,t){var n;n=t.type,/^(GET|HEAD|OPTIONS|TRACE)$/.test(n)||this.crossDomain||e.setRequestHeader("X-CSRFToken",o)}})}});
//# sourceMappingURL=create_poll.js.map