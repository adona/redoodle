!function(e){function t(t){for(var n,o,l=t[0],s=t[1],u=t[2],p=0,f=[];p<l.length;p++)o=l[p],a[o]&&f.push(a[o][0]),a[o]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(e[n]=s[n]);for(c&&c(t);f.length;)f.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,l=1;l<r.length;l++){var s=r[l];0!==a[s]&&(n=!1)}n&&(i.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={1:0,3:0,4:0},i=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=s;i.push([161,0]),r()}({16:function(e,t,r){},161:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),i=r(0),o=r.n(i),l=r(11),s=r.n(l),u=r(3);r(166);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,r){return t&&f(e.prototype,t),r&&f(e,r),e}function h(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?v(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var g=function(e){function t(e){var r;return p(this,t),(r=h(this,m(t).call(this,e))).state={page:r.props.page},r.handlePageChange=r.handlePageChange.bind(v(r)),r}return y(t,o.a.Component),d(t,[{key:"handlePageChange",value:function(e){this.setState({page:e})}},{key:"render",value:function(){return o.a.createElement("div",{id:"login-container"},o.a.createElement(S,{page:this.state.page,handlePageChange:this.handlePageChange}),o.a.createElement(w,{page:this.state.page}))}}]),t}(),S=function(e){function t(){return p(this,t),h(this,m(t).apply(this,arguments))}return y(t,o.a.Component),d(t,[{key:"render",value:function(){var e=this,t={login:"Log in",signup:"Sign up"};return o.a.createElement("div",{id:"login-tabs"},Object.keys(t).map(function(r){return o.a.createElement("div",{key:r,className:e.props.page==r?"selected":"",onClick:function(t){return e.props.handlePageChange(r)}},t[r])}))}}]),t}(),w=function(e){function t(){return p(this,t),h(this,m(t).apply(this,arguments))}return y(t,o.a.Component),d(t,[{key:"render",value:function(){return o.a.createElement("div",{id:"form-container"},"login"==this.props.page?o.a.createElement(u.Form,{id:"login-form",key:"login-form",submitURL:k,submitLabel:"Log in"},o.a.createElement(u.Input,{name:"username",placeholder:"Email",required:!0,requiredMessage:"Please, enter email.",validators:[u.validators.validateEmail]}),o.a.createElement(u.Input,{name:"password",type:"password",placeholder:"Password",required:!0,requiredMessage:"Please, enter password."})):o.a.createElement(u.Form,{id:"signup-form",key:"signup-form",submitURL:P,submitLabel:"Sign up"},o.a.createElement(u.Input,{name:"first_name",placeholder:"First name",required:!0,requiredMessage:"Please, enter first name."}),o.a.createElement(u.Input,{name:"last_name",placeholder:"Last name",required:!0,requiredMessage:"Please, enter last name."}),o.a.createElement(u.Input,{name:"email",placeholder:"Email",required:!0,requiredMessage:"Please, enter email.",validators:[u.validators.validateEmail]}),o.a.createElement(u.Input,{name:"password1",type:"password",placeholder:"Password",required:!0,requiredMessage:"Please, enter password.",validators:[u.validators.validatePassword]}),o.a.createElement(u.Input,{name:"password2",type:"password",placeholder:"Confirm password",required:!0,requiredMessage:"Please, confirm password.",validators:[u.validators.validatePasswordMatch],listenTo:["password1"]})))}}]),t}(),E=a()("body").attr("page"),k=a()("body").attr("loginurl"),P=a()("body").attr("signupurl");s.a.render(o.a.createElement(g,{page:E}),a()("#main")[0])},166:function(e,t,r){},3:function(e,t,r){"use strict";r.r(t),r.d(t,"Form",function(){return v}),r.d(t,"Input",function(){return y}),r.d(t,"Submit",function(){return b}),r.d(t,"validators",function(){return g});var n=r(2),a=r.n(n),i=r(0),o=r.n(i);r(9),r(16);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),e}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?d(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var r;return s(this,t),(r=p(this,f(t).call(this,e))).initializeState(),r.onValueChange=r.onValueChange.bind(d(r)),r.onBlur=r.onBlur.bind(d(r)),r.onSubmit=r.onSubmit.bind(d(r)),r.onServerSideErrors=r.onServerSideErrors.bind(d(r)),r}return h(t,o.a.Component),c(t,[{key:"initializeState",value:function(){var e=this,t=this.getChildren().filter(function(t){return e.isField(t)}),r={},n=!0,a=!1,i=void 0;try{for(var o,l=t[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){r[(d=o.value).props.name]={isRequired:null!=d.props.required,validators:this.getValidators(d),listeners:[],isFirstEdit:null==this.props.formValues,value:null!=this.props.formValues?this.props.formValues[d.props.name]:"",isValid:null!=this.props.formValues||null,error:null}}}catch(e){a=!0,i=e}finally{try{n||null==l.return||l.return()}finally{if(a)throw i}}var s=!0,u=!1,c=void 0;try{for(var p,f=t[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var d;if(null!=(d=p.value).props.listenTo){var h=!0,m=!1,v=void 0;try{for(var y,b=d.props.listenTo[Symbol.iterator]();!(h=(y=b.next()).done);h=!0){r[y.value].listeners.push(d.props.name)}}catch(e){m=!0,v=e}finally{try{h||null==b.return||b.return()}finally{if(m)throw v}}}}}catch(e){u=!0,c=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw c}}this.state={fields:r,nonFieldErrors:null},this.state.canSubmit=this.canSubmit()}},{key:"getChildren",value:function(){var e=this.props.children;return null==e?e=[]:Array.isArray(e)||(e=[e]),e}},{key:"isField",value:function(e){return e.type==y}},{key:"getValidators",value:function(e){var t=e.props.validators;if(null==t&&(t=[]),e.props.required){var r=g.getValidateRequired(e.props.requiredMessage);t.unshift(r)}return t}},{key:"onValueChange",value:function(e,t){var r=this.state,n=r.fields;n[e].value=t,r.fields=n,r.nonFieldErrors=null,this.setState(r),n[e].isFirstEdit||this.validate(e);var a=!0,i=!1,o=void 0;try{for(var l,s=n[e].listeners[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var u=l.value;""!=n[u].value&&this.validate(u)}}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}}},{key:"onBlur",value:function(e){var t=this.state,r=t.fields;r[e].isFirstEdit&&(r[e].isFirstEdit=!1,t.fields=r,this.setState(t),this.validate(e))}},{key:"validate",value:function(e){var t=this.state,r=t.fields,n={isValid:!0,error:null},a=!0,i=!1,o=void 0;try{for(var l,s=r[e].validators[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){if(!(n=(0,l.value)(r[e].value,e,r)).isValid)break}}catch(e){i=!0,o=e}finally{try{a||null==s.return||s.return()}finally{if(i)throw o}}r[e].isValid=n.isValid,r[e].error=n.error,t.fields=r,t.canSubmit=this.canSubmit(),this.setState(t)}},{key:"validateAll",value:function(){for(var e=0,t=Object.keys(this.state.fields);e<t.length;e++){var r=t[e];this.validate(r)}}},{key:"canSubmit",value:function(){var e=this.state;if(null!=e.nonFieldErrors)return!1;for(var t=e.fields,r=0,n=Object.values(t);r<n.length;r++){var a=n[r];if(a.isRequired&&""==a.value||null!=a.error)return!1}return!0}},{key:"onSubmit",value:function(e){if(e.preventDefault(),this.validateAll(),this.state.canSubmit){for(var t={},r=0,n=Object.keys(this.state.fields);r<n.length;r++){var i=n[r];t[i]=this.state.fields[i].value}null!=this.props.onSubmit?this.props.onSubmit(t):a.a.post(this.props.submitURL,t).done(function(e){window.location.replace(e.redirect)}).fail(this.onServerSideErrors)}}},{key:"onServerSideErrors",value:function(e){if([400,401].includes(e.status)){for(var t=e.responseJSON,r=this.state,n=r.fields,a=0,i=Object.keys(t);a<i.length;a++){var o=i[a];"__all__"==o?r.nonFieldErrors=t[o]:(n[o].isValid=!1,n[o].error=t[o][0])}r.fields=n,r.canSubmit=!1,this.setState(r)}}},{key:"render",value:function(){var e=this,t=this.getChildren(),r=this.state.fields;return o.a.createElement("form",{className:"custom-form",id:this.props.id,noValidate:!0,onSubmit:this.onSubmit},t.map(function(t,n){return e.isField(t)?o.a.cloneElement(t,{key:n,value:r[t.props.name].value,isValid:r[t.props.name].isValid,error:r[t.props.name].error,onValueChange:e.onValueChange,onBlur:e.onBlur}):t}),null==this.state.nonFieldErrors?"":o.a.createElement("div",{className:"field-container"},this.state.nonFieldErrors.map(function(e,t){return o.a.createElement("div",{className:"error-list",key:t}," ",e," ")})),o.a.createElement(b,{active:this.state.canSubmit,label:this.props.submitLabel}))}}]),t}(),y=function(e){function t(e){var r;return s(this,t),(r=p(this,f(t).call(this,e))).onValueChange=r.onValueChange.bind(d(r)),r.onBlur=r.onBlur.bind(d(r)),r}return h(t,o.a.Component),c(t,[{key:"onValueChange",value:function(e){this.props.onValueChange(this.props.name,e.currentTarget.value)}},{key:"onBlur",value:function(e){this.props.onBlur(this.props.name)}},{key:"render",value:function(){return o.a.createElement("div",{className:"field-container",required:this.props.required,invalid:0==this.props.isValid?"":null,name:this.props.name},o.a.createElement("input",{className:"field-input",type:this.props.type,name:this.props.name,placeholder:this.props.placeholder,value:this.props.value,onChange:this.onValueChange,onBlur:this.onBlur}),o.a.createElement("div",{className:"error-list"}," ",this.props.error," "))}}]),t}(),b=function(e){function t(){return s(this,t),p(this,f(t).apply(this,arguments))}return h(t,o.a.Component),c(t,[{key:"render",value:function(){return o.a.createElement("input",{className:"submit-button",type:"submit",active:this.props.active.toString(),value:this.props.label,onClick:this.props.onClick})}}]),t}(),g={getValidateRequired:function(e){return null==e&&(e="Field is required."),function(t){var r=""!=t;return{isValid:r,error:r?null:e}}},validateEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e);return{isValid:t,error:t?null:"Invalid email. Try again, please."}},validatePassword:function(e){var t=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[,.\/<>?;':"[\]{}!@#$%^&*()-=_+])[A-Za-z\d,.\/<>?;':"[\]{}!@#$%^&*()-=_+]{8,}$/.test(e);return{isValid:t,error:t?null:"Invalid password. Password must be at least 8 characters long, and must contain at least one lowercase letter, one uppercase letter, one number, and one special character. Try again, please."}},validatePasswordMatch:function(e,t,r){var n="password1"==t?r.confirm2.value:r.password1.value,a=""==n|e==n;return{isValid:a,error:a?null:"Passwords do not match. Try again, please"}}}},9:function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n);var i=function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var r=document.cookie.split(";"),n=0;n<r.length;n++){var a=r[n].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}("csrftoken");a.a.ajaxSetup({beforeSend:function(e,t){var r;r=t.type,/^(GET|HEAD|OPTIONS|TRACE)$/.test(r)||this.crossDomain||e.setRequestHeader("X-CSRFToken",i)}})}});
//# sourceMappingURL=registration.js.map